<ResourceDictionary xmlns="https://github.com/avaloniaui"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					x:ClassModifier="internal"
					xmlns:advconverters="using:ADVTheme.Converters">
	<advconverters:OpacityBoolConverter x:Key="OpacityConverter"/>
	<Design.PreviewWith>
		<Border Padding="20">
			<StackPanel Width="350"
			Orientation="Vertical"
			Spacing="20">
				<Expander ExpandDirection="Up" Header="Expand Up">
					<StackPanel>
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
					</StackPanel>
				</Expander>
				<Expander ExpandDirection="Down"
						  Header="Expand Down">
					<StackPanel>
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
					</StackPanel>
				</Expander>
				<Expander ExpandDirection="Left"
						  Header="Expand Left">
					<StackPanel>
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
					</StackPanel>
				</Expander>
				<Expander ExpandDirection="Right"
						  Header="Expand Right">
					<StackPanel>
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
						<TextBlock Text="Expanded content" />
					</StackPanel>
				</Expander>
			</StackPanel>
		</Border>
	</Design.PreviewWith>

	<ControlTheme x:Key="ExpanderToggleButtonTheme" TargetType="ToggleButton">
		<Setter Property="Background" Value="{DynamicResource ADVTheme.Brush.Controls.Base}"/>
		<Setter Property="Template">
			<ControlTemplate>
				<Border Padding="2" Background="{TemplateBinding Background}" CornerRadius="{TemplateBinding CornerRadius}">
					<Grid ColumnDefinitions="Auto,3,*">
						<Border Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Center">
							<Grid>
								<Ellipse x:Name="PART_ButtonFill" Fill="{DynamicResource ADVTheme.Brush.Controls.Base}" Width="18" Height="18"/>
								<Path x:Name="PART_ButtonGlyph" HorizontalAlignment="Center"
								  VerticalAlignment="Center"
									Data="M 10 0 A 1 1 0 0 0 10 20 A 1 1 0 0 0 10 0 Z M 10 2 A 1 1 0 0 0 10 18 A 1 1 0 0 0 10 2 M 6 15 L 6 5 L 16 10 Z"
									Fill="{DynamicResource ADVTheme.Brush.Border.Base}" />
							</Grid>
							
						</Border>
						<ContentPresenter Name="PART_ContentPresenter"
										  Grid.Column="2"
										  Padding="{TemplateBinding Padding}"
										  VerticalAlignment="Center"
										  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
										  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
										  Background="Transparent"
										  Content="{TemplateBinding Content}"
										  ContentTemplate="{Binding $parent[Expander].HeaderTemplate}" />
					</Grid>
				</Border>
			</ControlTemplate>
		</Setter>

		<Style Selector="^ /template/ Path#PART_ButtonGlyph">
			<Setter Property="Transitions">
				<Setter.Value>
					<Transitions>
						<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15"/>
					</Transitions>
				</Setter.Value>
			</Setter>
		</Style>
		<Style Selector="^:checked /template/ Path#PART_ButtonGlyph">
			<Setter Property="Fill" Value="{DynamicResource ADVTheme.Brush.Highlight.Base}"/>
		</Style>
		<Style Selector="^:pointerover /template/ Ellipse#PART_ButtonFill">
			<Setter Property="Fill" Value="{DynamicResource ADVTheme.Brush.Controls.Light}"/>
		</Style>
		<Style Selector="^:pointerover /template/ Path#PART_ButtonGlyph">
			<Setter Property="Fill" Value="{DynamicResource ADVTheme.Brush.Border.Light}"/>
		</Style>
		<Style Selector="^:pointerover:checked /template/ Path#PART_ButtonGlyph">
			<Setter Property="Fill" Value="{DynamicResource ADVTheme.Brush.Highlight.Light}"/>
		</Style>
		<Style Selector="^:pressed /template/ Ellipse#PART_ButtonFill">
			<Setter Property="Fill" Value="{DynamicResource ADVTheme.Brush.Highlight.Base}"/>
		</Style>
		<Style Selector="^:pressed /template/ Path#PART_ButtonGlyph">
			<Setter Property="Fill" Value="{DynamicResource ADVTheme.Brush.Highlight.Lighter}"/>
		</Style>
	</ControlTheme>

	<ControlTheme x:Key="ToggleButtonDownTheme"
				  BasedOn="{StaticResource ExpanderToggleButtonTheme}"
				  TargetType="ToggleButton">
		<Style Selector="^">
			<Setter Property="CornerRadius" Value="4,4,0,0"/>
		</Style>
		<Style Selector="^:checked /template/ Path">
			<Setter Property="RenderTransform" Value="rotate(90deg)"/>
		</Style>
	</ControlTheme>

	<ControlTheme x:Key="ToggleButtonUpTheme"
				  BasedOn="{StaticResource ExpanderToggleButtonTheme}"
				  TargetType="ToggleButton">
		<Style Selector="^">
			<Setter Property="CornerRadius" Value="0,0,4,4"/>
		</Style>
		<Style Selector="^:checked /template/ Path">
			<Setter Property="RenderTransform" Value="rotate(-90deg)"/>
		</Style>
	</ControlTheme>
	
	<ControlTheme x:Key="ToggleButtonLeftTheme"
				  BasedOn="{StaticResource ExpanderToggleButtonTheme}"
				  TargetType="ToggleButton">
		<Style Selector="^">
			<Setter Property="CornerRadius" Value="0,4,4,0"/>
		</Style>
		<Style Selector="^:checked /template/ Path">
			<Setter Property="RenderTransform" Value="rotate(180deg)"/>
		</Style>
	</ControlTheme>

	<ControlTheme x:Key="ToggleButtonRightTheme"
				  BasedOn="{StaticResource ExpanderToggleButtonTheme}"
				  TargetType="ToggleButton">
		<Style Selector="^">
			<Setter Property="CornerRadius" Value="4,0,0,4"/>
		</Style>
		<Style Selector="^ /template/ Path">
			<Setter Property="RenderTransform" Value="rotate(180deg)"/>
		</Style>
		<Style Selector="^:checked /template/ Path">
			<Setter Property="RenderTransform" Value="rotate(0)"/>
		</Style>
	</ControlTheme>

	<ControlTheme x:Key="{x:Type Expander}" TargetType="Expander">
		<Style Selector="^[ExpandDirection=Down]">
			<Setter Property="Template">
				<ControlTemplate>
					<Border x:Name="PART_ExpandBorder" Background="{TemplateBinding Background}"
							BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}"
							CornerRadius="{TemplateBinding CornerRadius}">
						<Grid x:Name="PART_Grid" RowDefinitions="Auto,*">
							<ToggleButton Name="PART_toggle" Grid.Row="0"
										  HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
										  VerticalAlignment="{TemplateBinding VerticalAlignment}"
										  Content="{TemplateBinding Header}"
										  IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
										  Theme="{StaticResource ToggleButtonDownTheme}" />
							<Border x:Name="PART_Presenter" Grid.Row="1"
									Background="{DynamicResource ADVTheme.Brush.Controls.Dark}"
									CornerRadius="0,0,4,4" Opacity="0">
								<Grid x:Name="PART_Panel" RowDefinitions="1,*" IsVisible="{Binding ElementName=PART_Presenter, Path=Opacity, Converter={StaticResource OpacityConverter}}">
									<Rectangle Grid.Row="0" Fill="{DynamicResource ADVTheme.Brush.Border.Base}"/>
									<ContentPresenter Name="PART_ContentPresenter" Grid.Row="1" Padding="5"
													  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
													  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
													  Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
								</Grid>
							</Border>
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter>
		</Style>
		
		<Style Selector="^[ExpandDirection=Up]">
			<Setter Property="Template">
				<ControlTemplate>
					<Border x:Name="PART_ExpandBorder" Background="{TemplateBinding Background}"
							BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}"
							CornerRadius="{TemplateBinding CornerRadius}">
						<Grid x:Name="PART_Grid" RowDefinitions="*,Auto">
							<ToggleButton Name="PART_toggle" Grid.Row="1"
										  HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
										  VerticalAlignment="{TemplateBinding VerticalAlignment}"
										  Content="{TemplateBinding Header}"
										  IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
										  Theme="{StaticResource ToggleButtonUpTheme}" />
							<Border x:Name="PART_Presenter" Grid.Row="0"
									Background="{DynamicResource ADVTheme.Brush.Controls.Dark}"
									CornerRadius="4,4,0,0" Opacity="0">
								<Grid x:Name="PART_GridPresenter" RowDefinitions="*,1" IsVisible="{Binding ElementName=PART_Presenter, Path=Opacity, Converter={StaticResource OpacityConverter}}">
									<Rectangle Grid.Row="1" Fill="{DynamicResource ADVTheme.Brush.Border.Base}"/>
									<ContentPresenter Name="PART_ContentPresenter" Grid.Row="0" Padding="5"
													  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
													  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
													  Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
								</Grid>
							</Border>
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter>
		</Style>

		<Style Selector="^[ExpandDirection=Right]">
			<Setter Property="Template">
				<ControlTemplate>
					<Border x:Name="PART_ExpandBorder" Background="{TemplateBinding Background}"
							BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}"
							CornerRadius="{TemplateBinding CornerRadius}">
						<Grid x:Name="PART_Grid" ColumnDefinitions="Auto,*">
							<ToggleButton Name="PART_toggle" Grid.Column="0"
										  HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
										  VerticalAlignment="{TemplateBinding VerticalAlignment}"
										  Content="{TemplateBinding Header}"
										  IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
										  Theme="{StaticResource ToggleButtonRightTheme}" />
							<Border x:Name="PART_Presenter" Grid.Column="1"
									Background="{DynamicResource ADVTheme.Brush.Controls.Dark}"
									CornerRadius="0,4,4,0" Opacity="0">
								<Grid x:Name="PART_GridPresenter" ColumnDefinitions="1,*" IsVisible="{Binding ElementName=PART_Presenter, Path=Opacity, Converter={StaticResource OpacityConverter}}">
									<Rectangle Grid.Column="0" Fill="{DynamicResource ADVTheme.Brush.Border.Base}"/>
									<ContentPresenter Name="PART_ContentPresenter" Grid.Column="1" Padding="5"
													  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
													  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
													  Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
								</Grid>
							</Border>
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter>
		</Style>

		<Style Selector="^[ExpandDirection=Left]">
			<Setter Property="Template">
				<ControlTemplate>
					<Border x:Name="PART_ExpandBorder" Background="{TemplateBinding Background}"
							BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}"
							CornerRadius="{TemplateBinding CornerRadius}">
						<Grid x:Name="PART_Grid" ColumnDefinitions="*,Auto">
							<ToggleButton Name="PART_toggle" Grid.Column="1"
										  HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
										  VerticalAlignment="{TemplateBinding VerticalAlignment}"
										  Content="{TemplateBinding Header}"
										  IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
										  Theme="{StaticResource ToggleButtonLeftTheme}" />
							<Border x:Name="PART_Presenter" Grid.Column="0"
									Background="{DynamicResource ADVTheme.Brush.Controls.Dark}"
									CornerRadius="4,0,0,4" Opacity="0">
								<Grid x:Name="PART_GridPresenter" ColumnDefinitions="*,1" IsVisible="{Binding ElementName=PART_Presenter, Path=Opacity, Converter={StaticResource OpacityConverter}}">
									<Rectangle Grid.Column="1" Fill="{DynamicResource ADVTheme.Brush.Border.Base}"/>
									<ContentPresenter Name="PART_ContentPresenter" Grid.Column="0" Padding="5"
													  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
													  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
													  Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
								</Grid>
							</Border>
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter>
		</Style>

		<Style Selector="^ /template/ Border#PART_Presenter">
			<Setter Property="Transitions">
				<Setter.Value>
					<Transitions>
						<DoubleTransition Property="Opacity" Duration="0:0:0.15"/>
					</Transitions>
				</Setter.Value>
			</Setter>
		</Style>

		<Style Selector="^:expanded /template/ Border#PART_Presenter">
			<Setter Property="Opacity" Value="1"/>
		</Style>

		<Style Selector="^:disabled">
			<Setter Property="Opacity" Value="{DynamicResource ADVTheme.Opacity.Disabled}"/>
		</Style>
	</ControlTheme>
</ResourceDictionary>
