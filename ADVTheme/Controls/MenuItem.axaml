<ResourceDictionary xmlns="https://github.com/avaloniaui"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:conv="using:Avalonia.Controls.Converters"
xmlns:sys="using:System"
x:ClassModifier="internal">
	<conv:PlatformKeyGestureConverter x:Key="KeyGestureConverter" />

	<ControlTheme x:Key="{x:Type MenuItem}"
	TargetType="MenuItem">
		<Setter Property="Background" Value="Transparent" />
		<Setter Property="BorderThickness" Value="1" />
		<Setter Property="CornerRadius" Value="{DynamicResource ADVTheme.CornerRadius}"/>
		<Setter Property="Padding" Value="0"/>
		<Setter Property="Template">
			<ControlTemplate>
				<Border Name="PART_Border" Padding="{TemplateBinding Padding}"
						Background="{TemplateBinding Background}"
						BorderBrush="{TemplateBinding BorderBrush}"
						BorderThickness="{TemplateBinding BorderThickness}">
					<Grid Height="20">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="20" />
							<ColumnDefinition Width="5" />
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="Auto"
											  SharedSizeGroup="MenuItemIGT" />
							<ColumnDefinition Width="20" />
						</Grid.ColumnDefinitions>
						<StackPanel Orientation="Horizontal">
							<ContentControl Grid.Column="0"
											x:Name="PART_ToggleIconPresenter"
											IsVisible="False"
											Width="12"
											Height="12" />
						</StackPanel>

						<ContentControl Grid.Column="0"
										Name="PART_IconPresenter"
										MinWidth="12"
										HorizontalAlignment="Center"
										VerticalAlignment="Stretch"
										Content="{TemplateBinding Icon}" />
						<Separator Name="PART_Separator" Grid.Column="1"/>
						<ContentPresenter Name="PART_HeaderPresenter"
										  Grid.Column="2" Margin="{TemplateBinding Padding}"
										  VerticalAlignment="Center"
										  Content="{TemplateBinding Header}"
										  ContentTemplate="{TemplateBinding HeaderTemplate}">
							<ContentPresenter.DataTemplates>
								<DataTemplate DataType="sys:String">
									<AccessText Text="{Binding}" />
								</DataTemplate>
							</ContentPresenter.DataTemplates>
						</ContentPresenter>
						<TextBlock x:Name="PART_InputGestureText" Grid.Column="3"
								   VerticalAlignment="Center"
								   Text="{TemplateBinding InputGesture, Converter={StaticResource KeyGestureConverter}}" />
						<Path Name="rightArrow" Grid.Column="4" Margin="10,0,0,0" VerticalAlignment="Center"
							  Data="M0,0L4,3.5 0,7z" Stretch="None"
							  Fill="{DynamicResource ADVTheme.Palette.Foreground.Base}" />
						<Popup Name="PART_Popup"
							   IsLightDismissEnabled="False"
							   IsOpen="{TemplateBinding IsSubMenuOpen, Mode=TwoWay}"
							   Placement="RightEdgeAlignedTop">
							<Border Background="{DynamicResource ADVTheme.Palette.Background.Base}"
									BorderBrush="{DynamicResource ADVTheme.Palette.Border.Base}"
									BorderThickness="{TemplateBinding BorderThickness}">
								<ScrollViewer Theme="{StaticResource SimpleMenuScrollViewer}">
									<ItemsPresenter Name="PART_ItemsPresenter"
													Margin="2"
													Grid.IsSharedSizeScope="True"
													ItemsPanel="{TemplateBinding ItemsPanel}" />
								</ScrollViewer>
							</Border>
						</Popup>
					</Grid>
				</Border>
			</ControlTemplate>
		</Setter>

		<Style Selector="^:separator">
			<Setter Property="Template">
				<ControlTemplate>
					<Separator />
				</ControlTemplate>
			</Setter>
		</Style>

		<Style Selector="^:selected">
			<Setter Property="Foreground" Value="{DynamicResource ADVTheme.Palette.Foreground.Alt}"/>
			<Setter Property="Background" Value="{DynamicResource ADVTheme.Palette.Controls.Light}" />
			<Setter Property="BorderBrush" Value="{DynamicResource ADVTheme.Palette.Highlight.Base}" />
		</Style>

		<Style Selector="^:selected /template/ Separator#PART_Separator">
			<Setter Property="Background" Value="{DynamicResource ADVTheme.Palette.Highlight.Base}"/>
		</Style>

		<Style Selector="^:empty /template/ Path#rightArrow">
			<Setter Property="IsVisible" Value="False" />
		</Style>

		<Style Selector="^:disabled">
			<Setter Property="Opacity" Value="{DynamicResource ADVTheme.Opacity.Disabled}" />
		</Style>

		<Style Selector="^:toggle /template/ ContentControl#PART_ToggleIconPresenter, ^:radio /template/ ContentControl#PART_ToggleIconPresenter">
			<Setter Property="IsVisible" Value="True" />
		</Style>
		<Style Selector="^:toggle /template/ ContentPresenter#PART_IconPresenter, ^:radio /template/ ContentPresenter#PART_IconPresenter">
			<Setter Property="IsVisible" Value="False" />
		</Style>
		<Style Selector="^:checked:toggle /template/ ContentControl#PART_ToggleIconPresenter">
			<Setter Property="Content">
				<Template>
					<Path Data="{DynamicResource ADVTheme.Geometry.Checkmark}"
					Fill="{Binding $parent[MenuItem].Foreground}" />
				</Template>
			</Setter>
		</Style>
		<Style Selector="^:checked:radio /template/ ContentControl#PART_ToggleIconPresenter">
			<Setter Property="Content">
				<Template>
					<Ellipse Fill="{Binding $parent[MenuItem].Foreground}" Margin="4" Width="8" Height="8" />
				</Template>
			</Setter>
		</Style>
	</ControlTheme>
</ResourceDictionary>
